# 视频素材批量改名工具 - 优化需求明确版

## 需求概述

基于用户反馈和使用体验，对现有的视频素材批量改名工具进行6项核心功能优化，旨在提升用户体验、简化操作流程、增强功能实用性。

## 详细需求说明

### 建议1：修改视频名后缀序号添加方式

**功能描述**：
- 改动为所有视频名都添加序号（变成Text、Text2、Text3…），防止视频名重名
- 移除"启用数字后缀序号"选项，自动为所有文件添加序号

**实现要求**：
- 第一个文件不添加数字后缀，从第二个文件开始添加数字后缀
- 序号格式：Text、Text2、Text3、Text4...
- 无需用户手动选择，系统自动处理命名冲突

### 建议2：添加视频名自动识别功能

**功能描述**：
- 当视频名字段空白时，将视频的原视频名自动识别为视频名
- 需要过滤掉语言标识（如[en]、[zh]等）和文件扩展名
- 当视频名字段不为空时，使用用户输入的视频名

**实现要求**：
- 只在视频名字段为空时自动填入
- 自动去除文件扩展名（.mp4、.avi等）
- 自动去除语言标识（[en]、[zh]、[ja]等格式）
- 保留原始文件名的核心部分

### 建议3：添加语言输入字段

**功能描述**：
- 添加一个可以自己输入的语言字段
- 当语言字段为空时，按照之前实现的功能识别原视频名中的[en]格式的语言
- 当语言字段不为空时，语言为当前输入的语言内容

**实现要求**：
- 语言字段优先级：用户输入 > 自动识别 > 默认值
- 支持手动输入任意语言标识
- 保持与现有语言识别功能的兼容性

### 建议4：撤回功能

**功能描述**：
- 在为视频改名后可以撤回到之前的名字
- 防止命名错误情况的发生

**实现要求**：
- 记录文件重命名前的原始名称
- 提供撤回按钮或快捷键
- 支持批量撤回操作
- 撤回后恢复到重命名前的状态

### 建议5：修改文件列表显示（可选制作）

**功能描述**：
- 不显示文件的整体路径，直接显示文件的原名和修改后的名字
- 让用户可以直观看到视频的名称和改动变化

**实现要求**：
- 简化文件列表显示格式
- 显示：原文件名 → 新文件名
- 隐藏完整文件路径
- 保持预览功能的可用性

### 建议6：根据尺寸分类命名视频名（根据制作难度可选制作）

**功能描述**：
- 根据视频的尺寸不同（916、169等），分别为视频名添加后缀序号
- 不同尺寸的视频独立计算序号

**实现要求**：
- 检测视频文件的宽高比或分辨率
- 按尺寸分组：9:16（竖屏）、16:9（横屏）等
- 每个尺寸组独立计算序号
- 举例：3个916尺寸 + 3个169尺寸，视频名"Text"
  - 916尺寸：Text、Text2、Text3
  - 169尺寸：Text、Text2、Text3

## 实施优先级

### 高优先级（立即实施）
1. **建议1&2**：自动序号处理 + 智能文件名提取
   - 影响：核心用户体验
   - 复杂度：中等
   - 预计工时：2-3小时

2. **建议3**：语言字段优先级
   - 影响：功能完整性
   - 复杂度：低
   - 预计工时：1-2小时

### 中优先级（后续实施）
3. **建议4**：撤回功能
   - 影响：用户容错性
   - 复杂度：中等
   - 预计工时：2-3小时

4. **建议5**：预览界面简化
   - 影响：界面友好性
   - 复杂度：低
   - 预计工时：1小时

### 低优先级（可选实施）
5. **建议6**：按尺寸分组序号
   - 影响：高级功能
   - 复杂度：高
   - 预计工时：4-5小时

## 技术实现要点

### 建议1&2 技术要点
- **HTML修改**：移除"启用数字后缀序号"复选框
- **JavaScript逻辑**：
  - 修改文件选择事件处理
  - 实现智能文件名提取函数
  - 更新序号生成逻辑
- **兼容性**：确保与现有预览功能兼容

### 文件名提取逻辑
```javascript
function extractVideoName(filename) {
    // 1. 去除文件扩展名
    let name = filename.replace(/\.[^.]+$/, '');
    
    // 2. 去除语言标识 [xx]
    name = name.replace(/\[[a-zA-Z]{2,3}\]/g, '');
    
    // 3. 清理多余空格
    return name.trim();
}
```

### 序号处理逻辑
```javascript
function generateSequentialNames(baseName, count) {
    const names = [];
    for (let i = 0; i < count; i++) {
        if (i === 0) {
            names.push(baseName);
        } else {
            names.push(`${baseName}${i + 1}`);
        }
    }
    return names;
}
```

## 验收标准

### 建议1&2验收标准
- [ ] 移除"启用数字后缀序号"选项
- [ ] 选择文件后自动填入视频名字段（仅当字段为空时）
- [ ] 正确去除文件扩展名和语言标识
- [ ] 自动生成序号：Text、Text2、Text3...
- [ ] 预览功能正常工作
- [ ] 重命名功能正常工作

### 测试用例
1. **空视频名字段测试**：
   - 输入文件：`video[en].mp4`
   - 期望结果：视频名字段自动填入"video"

2. **序号生成测试**：
   - 输入：3个文件，视频名"Test"
   - 期望结果：Test、Test2、Test3

3. **非空视频名字段测试**：
   - 视频名字段已有内容："Custom"
   - 期望结果：不自动填入，保持"Custom"

## 实施计划

### 第一阶段：建议1&2实施
1. 分析现有代码结构
2. 修改HTML界面元素
3. 实现智能文件名提取功能
4. 修改序号处理逻辑
5. 测试验证功能
6. 文档更新

### 后续阶段
按优先级顺序实施其他建议，每个建议完成后进行测试验证。